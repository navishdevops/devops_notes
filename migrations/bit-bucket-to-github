BitBucket To GitHub Migration — A complete Manual and Automation Guide
-------------------------------------------------------------------------

==================================================================================
# 1. Create a bare clone of the Bitbucket repo
git clone --mirror https://bitbucket.org/atlassian/atlassian-connect-js.git

# 2. Enter the directory
cd atlassian-connect-js.git

# 2.1. ( Optional but professional ) List branches and tags to confirm you have everything
git branch -a
git tag

3. Create GitHub repo weher we need to migrate our bitbucket repo:
https://github.com/navishdevops/bbtogh.git

git remote set-url origin https://github.com/navishdevops/bbtogh.git
git remote add bitbucket https://bitbucket.org/atlassian/atlassian-connect-js.git
git push origin --mirror

cd .. 
rm -rf atlassian-connect-js.git
==================================================================================
Automating manual steps via shell script:
We can directly use below shell script and it will migrate all our bitbucket repo’s to GitHub.
This shell script reads the repo to be migrated from text file bitbucket_repos.txt, so we need to make a text file named as bitbucket_repos.txt with all repo’s(clone url’s) that we need to migrate.

###############Shell script for migrating all repo’s reading from file################
#!/bin/bash

name_of_github_org=”orgname”
TEAM=”Teamname” ##Remove if no team needs to be assigned for repo’s

while IFS=”” read -r p || [ -n “$p” ]
do
git clone — mirror $p
repo=echo $p |cut -d’/’ -f6

echo “Local repo created: $repo”

cd ${repo}

gh_repo=echo $repo|cut -d’.’ -f1

gh repo create ${name_of_github_org}/${gh_repo} — private — team $TEAM

##comment above and use below if no team needs to be assigned for GitHub repo
##gh repo create barcotestemu/${gh_repo} — private
git remote set-url origin https://user@apikey@github.com/${name_of_github_org}/${gh_repo}

git remote add bitbucket $p
git push origin — mirror
done < bitbucket_repos.txt

bitbucket_repos.txt sample:
https://bitbucketurl/projectname/myrepo1.git
https://bitbucketurl/projectname/nex/myrepo2.git

Prerequisite for executing shell script:
1. Setup git auto login(no user password entry again and again) for 1 hour(bitbucket):

git config — global credential.helper cache
git config — global credential.helper ‘cache — timeout=3600’

2. copy paste the above shell script in file bitbucket_to_github_migration.sh

3. Edit shell script i.e. replace user and apikey in below line with your actual user and apikey for GitHub login :
https://user@apikey@github.com/${name_of_github_org}/${gh_repo}

4. Make your input file bitbucket_repos.txt which contains all bitbucket clone url’s of repo’s that needs to be migrated. Once repo url in each line.

5. Keep the input file and shell script in same directory.

6. Run Shell script:

bash bitbucket_to_github_migration.sh
